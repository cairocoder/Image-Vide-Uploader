{"ast":null,"code":"var _jsxFileName = \"/Users/cairocoder/sites/assessment/frontend/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/Dashboard.js\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport FileUpload from \"../components/FileUpload\";\nimport FileList from \"../components/FileList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const [files, setFiles] = useState([]);\n  const {\n    token,\n    logout\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchFiles = async () => {\n      try {\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/files`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setFiles(res.data.files);\n      } catch (err) {\n        var _err$response, _err$response2, _err$response2$data;\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n          logout();\n          navigate(\"/login\");\n        }\n        alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Failed to fetch files\");\n      }\n    };\n    fetchFiles();\n  }, [token, logout, navigate]);\n  const handleUploadSuccess = newFile => {\n    setFiles([newFile, ...files]);\n  };\n  const handleLogout = () => {\n    logout();\n    navigate(\"/login\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogout,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n      onUpload: handleUploadSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FileList, {\n      files: files,\n      setFiles: setFiles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(Dashboard, \"BWDwmI5TkVU81ItCRjZCoA+kb18=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","AuthContext","useNavigate","FileUpload","FileList","jsxDEV","_jsxDEV","Dashboard","_s","files","setFiles","token","logout","navigate","fetchFiles","res","get","process","env","REACT_APP_API_URL","headers","Authorization","data","err","_err$response","_err$response2","_err$response2$data","response","status","alert","message","handleUploadSuccess","newFile","handleLogout","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onUpload","_c","$RefreshReg$"],"sources":["/Users/cairocoder/sites/assessment/frontend/src/pages/Dashboard.js"],"sourcesContent":["// frontend/src/pages/Dashboard.js\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport FileUpload from \"../components/FileUpload\";\nimport FileList from \"../components/FileList\";\n\nconst Dashboard = () => {\n    const [files, setFiles] = useState([]);\n    const { token, logout } = useContext(AuthContext);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchFiles = async () => {\n            try {\n                const res = await axios.get(\n                    `${process.env.REACT_APP_API_URL}/api/files`,\n                    {\n                        headers: { Authorization: `Bearer ${token}` },\n                    }\n                );\n                setFiles(res.data.files);\n            } catch (err) {\n                if (err.response?.status === 401) {\n                    logout();\n                    navigate(\"/login\");\n                }\n                alert(err.response?.data?.message || \"Failed to fetch files\");\n            }\n        };\n        fetchFiles();\n    }, [token, logout, navigate]);\n\n    const handleUploadSuccess = (newFile) => {\n        setFiles([newFile, ...files]);\n    };\n\n    const handleLogout = () => {\n        logout();\n        navigate(\"/login\");\n    };\n\n    return (\n        <div>\n            <h2>Dashboard</h2>\n            <button onClick={handleLogout}>Logout</button>\n            <FileUpload onUpload={handleUploadSuccess} />\n            <FileList files={files} setFiles={setFiles} />\n        </div>\n    );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}